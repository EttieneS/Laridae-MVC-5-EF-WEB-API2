@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewBag.Title = "Edit Teacher";
}

<link rel="stylesheet" type="text/css" href="../../packages/DataTables/DateTime/css/dataTables.dateTime.min.css">
<h2>Edit Teacher</h2>

<div class="card card-report mx-auto">
    <!--<div class="card-body">-->
    <form action="https://localhost:44380/api/Teachers/EditTeacher" method="post" typeof="application/json">
        <div class="form-group row">
            <input type="hidden" id="Id" name="Id" />
            <label for="Name" class="col-sm col-fom-label">Teacher Name</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="Name" name="Name" placeholder="Teacher Name">
            </div>
        </div>
        <div class="form-group-row">
            <div class="col-sm-6">
                <input type="date" class="form-control" id="Date" name="Date" placeholder="">
            </div>
        </div>
        <div class="form-group row">
            <button class="btn btn-primary" type="submit" id="edit" name="edit">Save</button>
        </div>
    </form>
</div>
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/bootstrap")
<script type="text/javascript" src="../../packages/datetimepicker/moment.min.js"></script>
<script>
    $(document).ready(function () {
        var Id = localStorage.getItem("teacherId")

        $.ajax({
            type: 'POST',
            url: 'https://localhost:44380/api/Teachers/GetTeacher/' + Id,
            success: function (teacher) {
                $('#Id').val(teacher.Id);
                $('#Name').val(teacher.Name);

                var date = teacher.date;
                var unix = moment(date, "YYYY/MM/DD", true).format();
                $('#Date').text(unix);
            }
        });
    });

    function editTeacher() {
        var date = $('#Date').val();
        var ts = moment(date, "YYYY/MM/DD").valueOf();

        var Id = $('#Id').val();
        var Name = $('#Name').val();

        $.ajax({
            type: 'PUT',
            url: 'https://localhost:44380/api/Teachers/EditTeacher/',
            crossDomain: true,
            headers: {
                "Access-Control-Allow-Cross-Origin": "*"
            },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: {
                'Id': Id,
                'Name': Name
            },
            success: function () {
                alert("Great Success");
            }
        });
    }
</script>


